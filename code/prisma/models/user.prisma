model User {
  id            String             @id @default(cuid())
  email         String             @unique
  name          String
  preferredName String?
  isProf        Boolean            @default(false)
  pronunciation String?
  pronouns      String?
  phone         String?
  photoUrl      String?
  github        String?
  bio           String?
  socialLinks   String[]           @default([])
  chatLinks     String[]           @default([])
  timezone      String?
  createdAt     DateTime           @default(now())
  updatedAt     DateTime           @updatedAt

  classRoles      ClassRole[]
  groupRoles      GroupRole[]
  groupSupervises GroupSupervisor[] // NEW

  activities      Activity[]   
  attendancePolls   AttendancePoll[]   @relation("PollCreator")
  attendanceRecords AttendanceRecord[] @relation("AttendanceRecords")    
  
  events Event[] @relation("EventCreator") // Events created by this user
  availability Availability[] @relation("UserAvailability") // User's weekly availability
  pulseEntries PulseEntry[] @relation("UserPulseEntries") // User's pulse check entries
  workJournals WorkJournal[] @relation("UserWorkJournals") // User's work journal entries
  
  // Chat relationships
  conversations1 Conversation[] @relation("UserConversations1") // Conversations where user is user1
  conversations2 Conversation[] @relation("UserConversations2") // Conversations where user is user2
  messages Message[] @relation("UserMessages") // Messages sent by this user

  @@index([name])
  @@index([email])
  @@map("users")
}
